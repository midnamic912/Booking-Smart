{"version":3,"sources":["components/Review.jsx","components/Rate.jsx","components/Footer.jsx","components/App.jsx","index.js"],"names":["Review","props","className","rating","style","content","color","time","Rate","rate","width","rateCount","Footer","id","onClick","forRetryBtn","hotel","App","useState","data","setData","setHotel","fetchData","retryWithAddress","merchantName","hotelName","merchantAddress","hotelAddress","config","params","keyword","axios","get","merchantData","console","log","result","useEffect","chrome","tabs","query","active","currentWindow","tab","sendMessage","message","response","name","formatted_address","user_ratings_total","reviews","map","review","index","text","relative_time_description","href","url","target","rel","rootElement","document","getElementById","createRoot","render"],"mappings":"8NAEe,SAASA,EAAOC,GAC7B,OACE,sBAAKC,UAAU,SAAQ,UACrB,4BAAI,WAAaD,EAAME,SACvB,mBAAGC,MAAyB,eAAlBH,EAAMI,QAA2B,CAACC,MAAO,WAAa,KAAK,SAAEL,EAAMI,UAC7E,4BAAIJ,EAAMM,SAGhB,CCOeC,MAff,SAAcP,GACZ,OACE,gCACA,sBAAKC,UAAU,WAAU,UACvB,qBAAKA,UAAU,YAAW,4CAC1B,qBAAKA,UAAU,WAAWE,MAAsB,cAAfH,EAAMQ,KAAuB,CAACC,MAAO,GAAK,CAACA,MAAQT,EAAMQ,KAAK,EAAE,IAAK,KAAK,+CAE7G,qBAAIP,UAAU,OAAM,mBACXD,EAAMQ,KAAI,MAAKR,EAAMU,UAAS,cAK3C,ECHeC,MAVf,SAAgBX,GACZ,OAAQ,gCACR,yEACA,wBAAQY,GAAG,WAAWC,QAAS,WAAKb,EAAMc,aAAY,EAAMd,EAAMe,MAAM,EAAE,0BAC1E,oBAAGd,UAAU,iBAAgB,uBACb,gDAAe,mBAGnC,E,QCmFee,MAtFf,WAGE,MAAwBC,mBAAS,MAAK,mBAA/BC,EAAI,KAAEC,EAAO,KACpB,EAA0BF,mBAAS,MAAK,mBAAjCF,EAAK,KAAEK,EAAQ,KAGhBC,EAAS,iDAAG,WAAOC,EAAkBP,GAAK,yFAS7C,OARKQ,EAAeR,EAAMS,UACrBC,EAAkBV,EAAMW,aAGxBC,EAAS,CACbC,OAAQ,CACNC,QAASP,EAAmBG,EAAkBF,IAEhD,EAAD,gBAGsCO,IAAMC,IACzC,2EACAJ,GACA,KAAD,WAHaK,EAAY,EAAlBd,KAIRe,QAAQC,IAAI,0BAA2BF,EAAaG,QACpDhB,EAAQa,EAAaG,QAAQ,uHAIhC,gBArBc,wCAuCf,OAfAC,oBAAS,gCAAC,oHAEcC,OAAOC,KAAKC,MAAM,CAACC,QAAQ,EAAMC,eAAe,IAAM,OAAhE,OAAgE,4BAAnEC,EAAG,cAKaL,OAAOC,KAAKK,YAAYD,EAAI9B,GAAI,CAACgC,QAAS,8BAA8B,KAAD,EAAxFC,EAAQ,OACdZ,QAAQC,IAAI,iCAAiCW,GAC7CzB,EAASyB,GACTxB,GAAU,EAAOwB,GAAU,4CAC5B,IAIC3B,EAEA,sBAAKjB,UAAU,MAAK,UAClB,oBAAIA,UAAU,eAAc,SAAEiB,EAAK4B,MAAQ5B,EAAK4B,OAChD,4BAAI5B,EAAK6B,mBAAqB7B,EAAK6B,oBACnC,cAAC,EAAI,CACHvC,KAAMU,EAAKhB,OAASgB,EAAKhB,OAAS,YAClCQ,UACEQ,EAAK8B,mBACD9B,EAAK8B,mBACL,oBAGR,gDACC9B,EAAK+B,QACF/B,EAAK+B,QAAQC,KAAI,SAACC,EAAQC,GACxB,OACE,cAACrD,EAAM,CAELG,OAAQiD,EAAOjD,OACfE,QAAS+C,EAAOE,KAAOF,EAAOE,KAAO,aACrC/C,KAAM6C,EAAOG,2BAHRF,EAMX,IACA,aACJ,cAAC,EAAM,CAACrC,MAAOA,EAAOD,YAAaO,IAEnC,mBAAGkC,KAAMrC,EAAKsC,IAAKC,OAAO,SAASC,IAAI,sBAAqB,kCAKhE,qBAAKzD,UAAU,MAAK,SAClB,wDAGN,ECtFM0D,EAAcC,SAASC,eAAe,QAC/BC,qBAAWH,GAInBI,OAED,cAAC,EAAG,I","file":"static/js/main.79926d14.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function Review(props) {\n  return (\n    <div className=\"review\">\n      <p>{\"Rating: \" + props.rating}</p>\n      <p style={props.content === \"No Comment\" ? {color: \"#B2B2B2\"} : null}>{props.content}</p>\n      <p>{props.time}</p>\n    </div>\n  );\n}\n","import React from \"react\";\n\nfunction Rate(props) {\n  return (\n    <div>\n    <div className=\"rateStar\">\n      <div className=\"emptyStar\">â˜…â˜…â˜…â˜…â˜…</div>\n      <div className=\"fullStar\" style={props.rate === \"No Rating\" ? {width: 0} : {width: (props.rate/5*100)+\"%\"}}>â˜…â˜…â˜…â˜…â˜…</div>\n    </div>\n    <h2 className=\"rate\">\n      Rate: {props.rate} / {props.rateCount} Rates\n    </h2>\n    </div>\n     \n  );\n}\n\nexport default Rate;\n","import React from \"react\";\n\nfunction Footer(props) {\n    return (<div>\n    <p>Wrong Result? Search again with address!</p>\n    <button id=\"retryBtn\" onClick={()=>{props.forRetryBtn(true, props.hotel)}}>Search Again</button>\n    <p className=\"resourceCredit\">\n          Resource: <span>ðŸš©</span> Google Map\n        </p>\n    </div>)\n}\n\nexport default Footer;","import \"../styles.css\";\nimport Review from \"./Review\";\nimport Rate from \"./Rate\";\nimport Footer from \"./Footer\";\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\n\nfunction App() {\n\n\n  const [data, setData] = useState(null);\n  const [hotel, setHotel] = useState(null);\n\n\n  const fetchData = async (retryWithAddress, hotel) => {\n    const merchantName = hotel.hotelName; // Extention will fetch the hotel name on Booking.com. <document.querySelector('.pp-header__title')>\n    const merchantAddress = hotel.hotelAddress // document.querySelector(\".hp_address_subtitle\")\n\n    // If it is retry, search with address \n    const config = {\n      params: {\n        keyword: retryWithAddress ? merchantAddress : merchantName, \n      },\n    };\n\n    try {\n      const { data: merchantData } = await axios.get(\n        \"http://booking-smart-server.ap-northeast-1.elasticbeanstalk.com/merchant\", \n        config\n      );\n      console.log(\"Result logged from app:\", merchantData.result);\n      setData(merchantData.result);\n    } catch (error) {\n      throw error\n    }\n  };\n\n  //First time load merchant data\n  useEffect(async () => {\n      // tabs.query returns an array of tabs. With query like here, it'll be only one tab.\n      const [tab] = await chrome.tabs.query({active: true, currentWindow: true})\n\n      // sendMessage to content script and get the hotel obj\n      // have to sendmessage to specified tab with tabId\n      // fetch Places API data with the hotel\n      const response = await chrome.tabs.sendMessage(tab.id, {message: \"Fetch Hotel Data from DOM\"});\n      console.log(\"response from content script: \",response)\n      setHotel(response)   \n      fetchData(false, response);\n  }, []);\n\n\n\n  if (data) {\n    return (\n      <div className=\"App\">\n        <h1 className=\"merchantName\">{data.name && data.name}</h1>\n        <p>{data.formatted_address && data.formatted_address}</p>\n        <Rate\n          rate={data.rating ? data.rating : \"No Rating\"}\n          rateCount={\n            data.user_ratings_total\n              ? data.user_ratings_total\n              : \"No Rating Total\"\n          }\n        />\n        <h4>Newest Review:</h4>\n        {data.reviews\n          ? data.reviews.map((review, index) => {\n              return (\n                <Review\n                  key={index} // when the index of review is static, it's ok\n                  rating={review.rating}\n                  content={review.text ? review.text : \"No Comment\"}\n                  time={review.relative_time_description}\n                />\n              );\n            })\n          : \"No Reviews\"}\n        <Footer hotel={hotel} forRetryBtn={fetchData}/>\n        {/* create a new tab and prevent tabnapping attacks */}\n        <a href={data.url} target=\"_blank\" rel=\"noopener noreferrer\">See on Google Map</a>\n      </div>\n    );\n  } else{ // UI before the API comes back\n    return (\n    <div className=\"App\">\n      <h1>Loading Hotel Info...</h1>\n    </div>)\n  }\n}\n  \n\nexport default App;\n","import { createRoot } from \"react-dom/client\";\nimport App from \"./components/App\";\n\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\n\n\nroot.render(\n  \n    <App />\n \n);\n"],"sourceRoot":""}